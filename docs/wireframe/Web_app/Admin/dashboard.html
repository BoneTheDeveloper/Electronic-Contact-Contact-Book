<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECONTACT Admin - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            --primary: #0284C7;
            --sidebar-width: 280px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        .sidebar {
            width: var(--sidebar-width);
            transition: all 0.3s ease;
        }

        .nav-item {
            transition: all 0.2s ease;
        }

        .nav-item.active {
            background-color: rgba(2, 132, 199, 0.1);
            color: var(--primary);
            border-right: 4px solid var(--primary);
        }

        .card-shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Year Slider Styles */
        .year-slider {
            position: relative;
            overflow-x: auto;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .year-slider::-webkit-scrollbar {
            display: none;
        }

        .year-slider::-webkit-scrollbar-thumb {
            display: none;
        }

        .year-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .year-item:hover {
            transform: translateY(-2px);
        }

        .year-item.active {
            background: linear-gradient(135deg, #0284C7 0%, #0369a1 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
        }

        .slider-btn {
            transition: all 0.2s ease;
        }

        .slider-btn:hover {
            background-color: #f1f5f9;
        }

        .slider-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>

<body class="flex">

    <!-- SIDEBAR NAVIGATION -->
    <aside class="sidebar h-screen bg-white border-r border-slate-200 flex flex-col sticky top-0 shrink-0">
        <!-- Brand -->
        <div class="p-6 border-b border-slate-100 flex items-center gap-3">
            <div class="p-2 bg-blue-50 rounded-xl">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#0284C7" stroke-width="2.5">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M2 17L12 22L22 17" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </div>
            <div>
                <h1 class="text-xl font-black text-slate-800 tracking-tight leading-none">ECONTACT</h1>
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Admin Portal</span>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-1">
            <p class="px-4 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Chính</p>

            <a href="#" class="nav-item active flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="7" height="7" />
                    <rect x="14" y="3" width="7" height="7" />
                    <rect x="14" y="14" width="7" height="7" />
                    <rect x="3" y="14" width="7" height="7" />
                </svg>
                Tổng quan
            </a>

            <p class="px-4 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 mt-6">Quản trị</p>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                </svg>
                Người dùng
            </a>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z" />
                    <path d="M6 12v5c3 3 9 3 12 0v-5" />
                </svg>
                Học thuật (Lớp/Môn)
            </a>

            <p class="px-4 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 mt-6">Vận hành</p>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                    <line x1="16" y1="2" x2="16" y2="6" />
                    <line x1="8" y1="2" x2="8" y2="6" />
                    <line x1="3" y1="10" x2="21" y2="10" />
                </svg>
                Điểm danh
            </a>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 1 1-7.6-10.6" />
                    <polyline points="22 4 12 14.01 9 11.01" />
                </svg>
                Quản lý Điểm số
            </a>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <rect x="2" y="5" width="20" height="14" rx="2" />
                    <line x1="2" y1="10" x2="22" y2="10" />
                </svg>
                Học phí & Tài chính
            </a>

            <a href="#"
                class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                    <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                </svg>
                Thông báo
            </a>
        </nav>

        <!-- User Profile Sidebar Bottom -->
        <div class="p-4 border-t border-slate-100 bg-slate-50/50">
            <div class="flex items-center gap-3 p-2">
                <div class="w-10 h-10 rounded-full bg-slate-200 border-2 border-white overflow-hidden">
                    <img src="https://ui-avatars.com/api/?name=Admin+Hust&background=0284C7&color=fff" alt="Avatar">
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-xs font-bold text-slate-800 truncate">Admin123</p>
                    <p class="text-[10px] text-slate-400 font-medium truncate">ad001@econtact.vn</p>
                </div>
                <button class="text-slate-400 hover:text-red-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg>
                </button>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-1 min-w-0 h-screen overflow-y-auto bg-slate-50">

        <!-- TOP HEADER -->
        <header
            class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 sticky top-0 z-40">
            <div class="flex items-center gap-4">
                <h2 class="text-lg font-extrabold text-slate-800">Bảng điều khiển</h2>

                <!-- Year Slider -->
                <div class="hidden md:flex items-center gap-2 bg-slate-100 px-3 py-1.5 rounded-full">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>

                    <!-- Slider Button Left -->
                    <button onclick="slideYear(-1)"
                        class="slider-btn w-6 h-6 rounded-lg flex items-center justify-center text-slate-500 hover:text-slate-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>

                    <!-- Year Items Slider -->
                    <div id="yearSlider" class="year-slider flex gap-2 max-w-[400px] flex-row-reverse">
                        <div class="year-item active px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2025-2026')">
                            2025-2026
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2024-2025')">
                            2024-2025
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2023-2024')">
                            2023-2024
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2022-2023')">
                            2022-2023
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2021-2022')">
                            2021-2022
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2020-2021')">
                            2020-2021
                        </div>
                        <div class="year-item px-3 py-1 rounded-lg text-[11px] font-bold whitespace-nowrap"
                            onclick="selectYear(this, '2019-2020')">
                            2019-2020
                        </div>
                    </div>

                    <!-- Slider Button Right -->
                    <button onclick="slideYear(1)"
                        class="slider-btn w-6 h-6 rounded-lg flex items-center justify-center text-slate-500 hover:text-slate-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="relative hidden sm:block">
                    <input type="text" placeholder="Tìm kiếm học sinh, giáo viên..."
                        class="w-64 pl-10 pr-4 py-2 bg-slate-50 border-none rounded-xl text-sm focus:ring-2 focus:ring-blue-100">
                    <svg class="absolute left-3 top-2.5 text-slate-400" xmlns="http://www.w3.org/2000/svg" width="16"
                        height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                </div>

                <div class="flex items-center gap-3">
                    <button class="p-2 text-slate-500 hover:bg-slate-100 rounded-lg relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                        </svg>
                        <span
                            class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                    </button>
                    <button class="p-2 text-slate-500 hover:bg-slate-100 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- CONTENT BODY -->
        <div class="p-8">

            <!-- Welcome Section -->
            <div class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div></div>
                <div class="flex items-center gap-3">
                    <button
                        class="px-5 py-2.5 bg-white border border-slate-200 rounded-xl font-bold text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        Xuất báo cáo
                    </button>
                    <button
                        class="px-5 py-2.5 bg-[#0284C7] text-white rounded-xl font-bold text-sm hover:bg-[#0369a1] flex items-center gap-2 shadow-lg shadow-blue-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="3">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        Thông báo mới
                    </button>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
                <!-- Card 1 - Học sinh -->
                <div class="bg-white p-6 rounded-[24px] card-shadow border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-blue-50 text-[#0284C7] rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                        </div>
                        <span class="text-green-500 text-xs font-bold">+2.5%</span>
                    </div>
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-1">Học sinh</p>
                    <h4 class="text-2xl font-black text-slate-800">1,248</h4>
                </div>
                <!-- Card 2 - Phụ huynh -->
                <div class="bg-white p-6 rounded-[24px] card-shadow border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-teal-50 text-teal-600 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                        </div>
                        <span class="text-teal-500 text-xs font-bold">+1.8%</span>
                    </div>
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-1">Phụ huynh</p>
                    <h4 class="text-2xl font-black text-slate-800">2,186</h4>
                </div>
                <!-- Card 3 - Giáo viên -->
                <div class="bg-white p-6 rounded-[24px] card-shadow border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-purple-50 text-purple-600 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                        </div>
                        <span class="text-slate-400 text-xs font-bold">Ổn định</span>
                    </div>
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-1">Giáo viên</p>
                    <h4 class="text-2xl font-black text-slate-800">85</h4>
                </div>
                <!-- Card 4 - Chuyên cần -->
                <div class="bg-white p-6 rounded-[24px] card-shadow border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-orange-50 text-orange-600 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                            </svg>
                        </div>
                        <span class="text-red-500 text-xs font-bold">-0.8%</span>
                    </div>
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-1">Chuyên cần</p>
                    <h4 class="text-2xl font-black text-slate-800">96.4%</h4>
                </div>
                <!-- Card 5 - Thu học phí -->
                <div class="bg-white p-6 rounded-[24px] card-shadow border border-slate-100">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-green-50 text-green-600 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="5" width="20" height="14" rx="2" />
                                <line x1="2" y1="10" x2="22" y2="10" />
                            </svg>
                        </div>
                        <span class="text-green-500 text-xs font-bold">+12%</span>
                    </div>
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-1">Thu học phí</p>
                    <h4 class="text-2xl font-black text-slate-800">84%</h4>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Chart Section -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Two Charts Side by Side -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- ATTENDANCE: ATTENDANCE STATISTICS (INCLUDING TARDINESS) -->
                        <div class="bg-white p-7 rounded-[32px] card-shadow border border-slate-100 flex flex-col">
                            <div class="flex items-center justify-between mb-8">
                                <div>
                                    <h4 class="text-lg font-black text-slate-800 tracking-tight">Thống kê Chuyên cần
                                    </h4>
                                    <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-1">Thống
                                        kê vắng mặt & đi trễ</p>
                                </div>
                                <select id="attendancePeriod" onchange="changeAttendancePeriod(this.value)"
                                    class="bg-slate-50 border border-slate-100 text-[11px] font-bold rounded-xl px-4 py-2 outline-none cursor-pointer">
                                    <option value="week">1 Tuần</option>
                                    <option value="month">1 Tháng</option>
                                    <option value="semester">Cả kỳ</option>
                                </select>
                            </div>

                            <div class="flex-1 flex flex-col justify-center">
                                <!-- Three Boxes Side by Side -->
                                <div class="grid grid-cols-3 gap-3">
                                    <!-- Box 1: Excused Absent -->
                                    <div
                                        class="bg-gradient-to-br from-amber-50 to-amber-100/50 rounded-2xl p-4 border border-amber-200 flex flex-col items-center justify-center">
                                        <div
                                            class="w-10 h-10 rounded-xl bg-amber-400 flex items-center justify-center mb-2 shadow-sm">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white"
                                                stroke-width="2.5">
                                                <path d="M9 11l3 3L22 4"></path>
                                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11">
                                                </path>
                                            </svg>
                                        </div>
                                        <p id="val-excused" class="text-2xl font-black text-amber-600 mb-1">--</p>
                                        <p class="text-[9px] font-black text-amber-700 uppercase tracking-widest">Vắng
                                            CP</p>
                                    </div>

                                    <!-- Box 2: Unexcused Absent -->
                                    <div
                                        class="bg-gradient-to-br from-rose-50 to-rose-100/50 rounded-2xl p-4 border border-rose-200 flex flex-col items-center justify-center">
                                        <div
                                            class="w-10 h-10 rounded-xl bg-rose-500 flex items-center justify-center mb-2 shadow-sm">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white"
                                                stroke-width="2.5">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <line x1="15" y1="9" x2="9" y2="15"></line>
                                                <line x1="9" y1="9" x2="15" y2="15"></line>
                                            </svg>
                                        </div>
                                        <p id="val-unexcused" class="text-2xl font-black text-rose-600 mb-1">--</p>
                                        <p class="text-[9px] font-black text-rose-700 uppercase tracking-widest">Vắng KP
                                        </p>
                                    </div>

                                    <!-- Box 3: Tardy -->
                                    <div
                                        class="bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-2xl p-4 border border-blue-200 flex flex-col items-center justify-center">
                                        <div
                                            class="w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center mb-2 shadow-sm">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white"
                                                stroke-width="2.5">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                        </div>
                                        <p id="val-tardy" class="text-2xl font-black text-blue-600 mb-1">--</p>
                                        <p class="text-[9px] font-black text-blue-700 uppercase tracking-widest">Đi trễ
                                        </p>
                                    </div>
                                </div>


                            </div>
                        </div>

                        <!-- FEE COLLECTION (REALIGNED) -->
                        <div class="bg-white p-7 rounded-[32px] card-shadow border border-slate-100 flex flex-col">
                            <div class="flex items-center justify-between mb-8">
                                <div>
                                    <h4 class="text-lg font-black text-slate-800 tracking-tight">Thu Học phí & Khoản thu
                                    </h4>
                                    <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-1">Tiến
                                        độ hoàn thành kế hoạch thu</p>
                                </div>
                                <div class="flex bg-slate-100 p-1 rounded-xl">
                                    <button onclick="changeFeeSemester('1')" id="btn-sem-1"
                                        class="px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all bg-white shadow-sm text-slate-800">Kỳ
                                        I</button>
                                    <button onclick="changeFeeSemester('2')" id="btn-sem-2"
                                        class="px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all text-slate-500 hover:text-slate-800">Kỳ
                                        II</button>
                                </div>
                            </div>

                            <div class="flex-1 flex flex-col md:flex-row items-center justify-around gap-8">
                                <div class="relative w-44 h-44 flex-shrink-0">
                                    <svg viewBox="0 0 36 36" class="w-full h-full transform -rotate-90">
                                        <path
                                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                            fill="none" stroke="#f1f5f9" stroke-width="3.5"
                                            stroke-dasharray="100, 100" />
                                        <path id="feeProgress"
                                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                            fill="none" stroke="#22c55e" stroke-width="3.5" stroke-dasharray="0, 100"
                                            stroke-linecap="round" class="transition-all duration-1000 ease-out" />
                                    </svg>
                                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                                        <span id="feePercText" class="text-4xl font-black text-slate-800">0%</span>
                                        <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Đã
                                            thu</span>
                                    </div>
                                </div>

                                <div class="flex-1 w-full space-y-4">
                                    <div
                                        class="bg-slate-50 p-4 rounded-2xl border border-slate-100 flex justify-between items-center">
                                        <div>
                                            <p
                                                class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-1">
                                                Thực thu</p>
                                            <p id="paidAmt" class="text-lg font-black text-green-600">--</p>
                                        </div>
                                        <div
                                            class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2.5">
                                                <polyline points="20 6 9 17 4 12"></polyline>
                                            </svg>
                                        </div>
                                    </div>
                                    <div
                                        class="bg-slate-50 p-4 rounded-2xl border border-slate-100 flex justify-between items-center">
                                        <div>
                                            <p
                                                class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-1">
                                                Công nợ</p>
                                            <p id="remainAmt" class="text-lg font-black text-orange-600">--</p>
                                        </div>
                                        <div
                                            class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2.5">
                                                <path d="M12 8v4l3 3"></path>
                                                <circle cx="12" cy="12" r="9"></circle>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="pt-2 px-1">
                                        <div class="flex justify-between text-[11px] font-bold text-slate-500 mb-2">
                                            <span>Chỉ tiêu: <span id="totalAmt">--</span></span><span
                                                id="paidCount">--</span>
                                        </div>
                                        <div class="w-full h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                            <div id="feeBar"
                                                class="h-full bg-green-500 rounded-full transition-all duration-1000"
                                                style="width: 0%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Audit Log Table -->
                    <div class="bg-white rounded-[32px] card-shadow border border-slate-100 overflow-hidden">
                        <div class="p-8 border-b border-slate-100 flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-black text-slate-800 tracking-tight">Hoạt động hệ thống</h4>
                                <p class="text-slate-400 text-xs font-medium uppercase tracking-widest mt-1">Audit Log -
                                    Nhật ký hoạt động</p>
                            </div>
                            <button
                                class="text-[#0284C7] text-xs font-black uppercase tracking-widest hover:underline">Xem
                                tất cả</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="bg-slate-50">
                                        <th
                                            class="px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                            Người dùng</th>
                                        <th
                                            class="px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                            Hành động</th>
                                        <th
                                            class="px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                            Thời gian</th>
                                        <th
                                            class="px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                            Ghi chú</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">
                                    <tr class="hover:bg-slate-50/50">
                                        <td class="px-8 py-4">
                                            <div class="flex items-center gap-3">
                                                <div
                                                    class="w-8 h-8 rounded-lg bg-blue-100 text-[#0284C7] flex items-center justify-center font-bold text-xs">
                                                    NT</div>
                                                <span class="text-sm font-bold text-slate-700">Nguyễn Thanh T.
                                                    (GVCN)</span>
                                            </div>
                                        </td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-500 tracking-tight">Phê
                                            duyệt đơn nghỉ phép</td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-400">08:42 AM</td>
                                        <td class="px-8 py-4"><span
                                                class="text-[10px] font-bold text-slate-400 italic">Học sinh: Lê Văn C.
                                                (8B)</span></td>
                                    </tr>
                                    <tr class="hover:bg-slate-50/50">
                                        <td class="px-8 py-4">
                                            <div class="flex items-center gap-3">
                                                <div
                                                    class="w-8 h-8 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center font-bold text-xs">
                                                    PQ</div>
                                                <span class="text-sm font-bold text-slate-700">Phạm Quốc D.
                                                    (Admin)</span>
                                            </div>
                                        </td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-500 tracking-tight">Cấu hình
                                            biểu phí học kỳ mới</td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-400">07:15 AM</td>
                                        <td class="px-8 py-4"><span
                                                class="bg-green-100 text-green-600 text-[10px] font-black uppercase px-2 py-1 rounded-md">Hoàn
                                                tất</span></td>
                                    </tr>
                                    <tr class="hover:bg-slate-50/50">
                                        <td class="px-8 py-4">
                                            <div class="flex items-center gap-3">
                                                <div
                                                    class="w-8 h-8 rounded-lg bg-slate-100 text-slate-600 flex items-center justify-center font-bold text-xs">
                                                    HT</div>
                                                <span class="text-sm font-bold text-slate-700">Học sinh - Nguyễn
                                                    An</span>
                                            </div>
                                        </td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-500 tracking-tight">Gửi yêu
                                            cầu hỗ trợ lấy lại mật khẩu</td>
                                        <td class="px-8 py-4 text-sm font-medium text-slate-400">Hôm qua</td>
                                        <td class="px-8 py-4"><span
                                                class="bg-blue-100 text-[#0284C7] text-[10px] font-black uppercase px-2 py-1 rounded-md">Đang
                                                chờ</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar Stats -->
                <div class="space-y-8">
                    <!-- Grade Distribution -->
                    <div class="bg-white p-8 rounded-[32px] card-shadow border border-slate-100">
                        <h4 class="text-lg font-black text-slate-800 tracking-tight mb-6">Xếp loại Học lực</h4>
                        <div class="space-y-5">
                            <div class="space-y-2">
                                <div
                                    class="flex justify-between text-xs font-black uppercase tracking-widest text-slate-400">
                                    <span>Giỏi</span>
                                    <span class="text-slate-700">32%</span>
                                </div>
                                <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                    <div class="bg-green-500 h-full w-[32%]"></div>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div
                                    class="flex justify-between text-xs font-black uppercase tracking-widest text-slate-400">
                                    <span>Khá</span>
                                    <span class="text-slate-700">45%</span>
                                </div>
                                <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                    <div class="bg-blue-500 h-full w-[45%]"></div>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div
                                    class="flex justify-between text-xs font-black uppercase tracking-widest text-slate-400">
                                    <span>Trung bình</span>
                                    <span class="text-slate-700">18%</span>
                                </div>
                                <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                    <div class="bg-orange-500 h-full w-[18%]"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Requests for Admin (Technical/Formal) -->
                    <div class="bg-slate-800 text-white p-8 rounded-[32px] card-shadow shadow-xl shadow-slate-200">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="p-2 bg-white/10 rounded-xl">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2.5">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                                </svg>
                            </div>
                            <h4 class="text-lg font-black tracking-tight">Hỗ trợ & Phúc khảo</h4>
                        </div>

                        <div class="space-y-4">
                            <div
                                class="p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 cursor-pointer transition-all">
                                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Quên mật
                                    khẩu (4)</p>
                                <p class="text-sm font-bold text-white">Xác thực OTP thất bại</p>
                                <p class="text-xs text-slate-400 mt-1">Cần hỗ trợ reset trực tiếp</p>
                            </div>
                            <div
                                class="p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 cursor-pointer transition-all">
                                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Yêu cầu
                                    phúc khảo (2)</p>
                                <p class="text-sm font-bold text-white">Chờ mở khóa đầu điểm</p>
                                <p class="text-xs text-slate-400 mt-1">Môn: Toán, Tiếng Anh</p>
                            </div>
                        </div>

                        <button
                            class="w-full mt-6 py-3 bg-white text-slate-800 font-black text-xs uppercase tracking-widest rounded-xl hover:bg-slate-100 transition-all">Xử
                            lý yêu cầu</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Interactive Demo logic -->
    <div id="toast"
        class="fixed bottom-8 right-8 bg-slate-900 text-white px-8 py-4 rounded-2xl shadow-2xl transition-all transform translate-y-20 opacity-0 font-bold z-50">
        Thông báo hệ thống
    </div>

    <script>
        // Year Slider Data - theo năm học
        const yearData = {
            '2019-2020': { students: 1050, parents: 1820, teachers: 70, attendance: '98.8%', fees: '75%' },
            '2020-2021': { students: 1095, parents: 1890, teachers: 74, attendance: '93.2%', fees: '79%' },
            '2021-2022': { students: 1128, parents: 1952, teachers: 77, attendance: '94.5%', fees: '77%' },
            '2022-2023': { students: 1156, parents: 1986, teachers: 78, attendance: '95.1%', fees: '79%' },
            '2023-2024': { students: 1189, parents: 2045, teachers: 81, attendance: '95.8%', fees: '82%' },
            '2024-2025': { students: 1218, parents: 2112, teachers: 83, attendance: '98.1%', fees: '83%' },
            '2025-2026': { students: 1225, parents: 2148, teachers: 84, attendance: '97.9%', fees: '82%' }
        };

        // Attendance Data by Time Period and Academic Year
        const attendanceData = {
            'week': {
                '2019-2020': { excused: 12, unexcused: 8, tardy: 45 },
                '2020-2021': { excused: 15, unexcused: 10, tardy: 52 },
                '2021-2022': { excused: 14, unexcused: 11, tardy: 48 },
                '2022-2023': { excused: 11, unexcused: 7, tardy: 38 },
                '2023-2024': { excused: 9, unexcused: 5, tardy: 32 },
                '2024-2025': { excused: 8, unexcused: 4, tardy: 28 }
            },
            'month': {
                '2019-2020': { excused: 52, unexcused: 35, tardy: 198 },
                '2020-2021': { excused: 58, unexcused: 42, tardy: 215 },
                '2021-2022': { excused: 55, unexcused: 48, tardy: 198 },
                '2022-2023': { excused: 45, unexcused: 28, tardy: 168 },
                '2023-2024': { excused: 38, unexcused: 20, tardy: 145 },
                '2024-2025': { excused: 35, unexcused: 18, tardy: 118 }
            },
            'semester': {
                '2019-2020': { excused: 485, unexcused: 312, tardy: 1485 },
                '2020-2021': { excused: 521, unexcused: 338, tardy: 1583 },
                '2021-2022': { excused: 498, unexcused: 356, tardy: 1452 },
                '2022-2023': { excused: 445, unexcused: 289, tardy: 1198 },
                '2023-2024': { excused: 412, unexcused: 245, tardy: 998 },
                '2024-2025': { excused: 398, unexcused: 223, tardy: 845 }
            }
        };

        // Current attendance period
        let currentAttendancePeriod = 'week';

        // Fee Collection Data by Semester
        const feeData = {
            '1': {
                percentage: 84,
                paidStudents: 856,
                paidAmount: '2.14 tỷ',
                remainingStudents: 392,
                remainingAmount: '980 triệu',
                totalStudents: 1248,
                totalAmount: '3.12 tỷ'
            },
            '2': {
                percentage: 76,
                paidStudents: 765,
                paidAmount: '1.91 tỷ',
                remainingStudents: 483,
                remainingAmount: '1.21 tỷ',
                totalStudents: 1248,
                totalAmount: '3.12 tỷ'
            }
        };

        function changeAttendancePeriod(period) {
            currentAttendancePeriod = period;
            renderAttendanceBarChart();

            const periodNames = {
                'week': '1 Tuần',
                'month': '1 Tháng',
                'semester': 'Cả kỳ'
            };
            showToast(`Đã chuyển sang: ${periodNames[period]}`);
        }

        function changeFeeSemester(semester) {
            updateFeeChart(semester);

            // Update button states
            const btn1 = document.getElementById('btn-sem-1');
            const btn2 = document.getElementById('btn-sem-2');

            if (semester === '1') {
                btn1.className = 'px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all bg-white shadow-sm text-slate-800';
                btn2.className = 'px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all text-slate-500 hover:text-slate-800';
            } else {
                btn1.className = 'px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all text-slate-500 hover:text-slate-800';
                btn2.className = 'px-4 py-1.5 rounded-lg text-[10px] font-bold transition-all bg-white shadow-sm text-slate-800';
            }

            const semesterName = semester === '1' ? 'Kỳ I' : 'Kỳ II';
            showToast(`Đã chọn: ${semesterName}`);
        }

        function renderAttendanceBarChart() {
            // Get current academic year from the active year item
            const activeYearItem = document.querySelector('.year-item.active');
            if (!activeYearItem) return;

            const yearKey = activeYearItem.textContent.trim();

            // Get data for current period and year
            const periodData = attendanceData[currentAttendancePeriod];
            if (!periodData) return;

            const data = periodData[yearKey];
            if (!data) return;

            const excused = data.excused;
            const unexcused = data.unexcused;
            const tardy = data.tardy;
            const totalIssues = excused + unexcused + tardy;

            // Calculate attendance rate (assuming ~1250 students * attendance days)
            // For simplicity: rate = (total - issues) / total * 100
            const totalStudents = 1248;
            let attendanceDays = 7; // week
            if (currentAttendancePeriod === 'month') attendanceDays = 30;
            if (currentAttendancePeriod === 'semester') attendanceDays = 120;

            const totalPossible = totalStudents * attendanceDays;
            const attended = totalPossible - totalIssues;
            const attendanceRate = totalPossible > 0 ? ((attended / totalPossible) * 100).toFixed(1) : '0.0';

            // Update display
            document.getElementById('val-excused').textContent = excused.toLocaleString('vi-VN');
            document.getElementById('val-unexcused').textContent = unexcused.toLocaleString('vi-VN');
            document.getElementById('val-tardy').textContent = tardy.toLocaleString('vi-VN');
            document.getElementById('attendance-rate').textContent = `${attendanceRate}%`;
            document.getElementById('attendance-bar').style.width = `${attendanceRate}%`;
        }

        function updateFeeChart(semester) {
            const data = feeData[semester];
            if (!data) return;

            const percentage = data.percentage;

            // Update circular progress
            const feeProgress = document.getElementById('feeProgress');
            feeProgress.setAttribute('stroke-dasharray', `${percentage}, 100`);

            // Update text
            document.getElementById('feePercText').textContent = `${percentage}%`;
            document.getElementById('paidAmt').textContent = data.paidAmount;
            document.getElementById('remainAmt').textContent = data.remainingAmount;
            document.getElementById('totalAmt').textContent = data.totalAmount;
            document.getElementById('paidCount').textContent = `${data.paidStudents.toLocaleString('vi-VN')} HS`;

            // Update progress bar
            document.getElementById('feeBar').style.width = `${percentage}%`;
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function selectYear(element, year) {
            document.querySelectorAll('.year-item').forEach(item => {
                item.classList.remove('active');
            });

            element.classList.add('active');

            const data = yearData[year];
            if (data) {
                animateValue('students-count', data.students);
                animateValue('parents-count', data.parents);
                animateValue('teachers-count', data.teachers);
                document.getElementById('attendance-value').textContent = data.attendance;
                document.getElementById('fees-value').textContent = data.fees;

                showToast(`Năm học ${year}`);

                // Update attendance chart for the selected year
                renderAttendanceBarChart();
            }
        }

        function animateNumber(elementId, newValue) {
            const element = document.getElementById(elementId);
            if (!element) return;

            const currentValue = parseInt(element.textContent.replace(/,/g, '')) || 0;
            const duration = 500;
            const steps = 20;
            const increment = (newValue - currentValue) / steps;
            let step = 0;

            const timer = setInterval(() => {
                step++;
                const value = Math.round(currentValue + (increment * step));
                element.textContent = value.toLocaleString('vi-VN');

                if (step >= steps) {
                    clearInterval(timer);
                    element.textContent = newValue.toLocaleString('vi-VN');
                }
            }, duration / steps);
        }

        function slideYear(direction) {
            const slider = document.getElementById('yearSlider');
            const scrollAmount = 150;

            if (direction === 1) {
                slider.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            } else {
                slider.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            }
        }

        function animateValue(elementId, newValue) {
            const element = document.getElementById(elementId);
            if (!element) return;

            const currentValue = parseInt(element.textContent.replace(/,/g, '')) || 0;
            const duration = 500;
            const steps = 20;
            const increment = (newValue - currentValue) / steps;
            let step = 0;

            const timer = setInterval(() => {
                step++;
                const value = Math.round(currentValue + (increment * step));
                element.textContent = value.toLocaleString('vi-VN');

                if (step >= steps) {
                    clearInterval(timer);
                    element.textContent = newValue.toLocaleString('vi-VN');
                }
            }, duration / steps);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize IDs for stats
            const statCards = document.querySelectorAll('.grid .bg-white .text-2xl');
            if (statCards.length >= 5) {
                statCards[0].id = 'students-count';
                statCards[1].id = 'parents-count';
                statCards[2].id = 'teachers-count';
                statCards[3].id = 'attendance-value';
                statCards[4].id = 'fees-value';
            }

            // Initialize attendance bar chart
            renderAttendanceBarChart();

            // Initialize fee chart
            updateFeeChart('1');
        });
    </script>

</body>

</html>