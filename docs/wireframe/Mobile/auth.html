<!DOCTYPE html>

<html lang="vi">



<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>EContact - Login Wireframe</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');



    :root {

      --primary-blue: #0284C7;

      --light-blue: #E0F2FE;

      --accent-blue: #38bdf8;

    }



    body {

      font-family: 'Inter', sans-serif;

      background-color: #f0f0f0;

      display: flex;

      justify-content: center;

      align-items: center;

      min-height: 100vh;

      margin: 0;

      padding: 20px;

    }



    /* Giả lập khung điện thoại iPhone 14 */

    .phone-frame {

      width: 375px;

      height: 812px;

      background-color: #ffffff;

      border: 12px solid #333;

      border-radius: 40px;

      position: relative;

      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);

      overflow: hidden;

      display: flex;

      flex-direction: column;

      transform-origin: center center;

    }

    /* Responsive scaling */
    @media (max-height: 850px) {
      .phone-frame {
        transform: scale(0.85);
      }
    }

    @media (max-height: 750px) {
      .phone-frame {
        transform: scale(0.75);
      }
    }

    @media (max-height: 650px) {
      .phone-frame {
        transform: scale(0.65);
      }
    }

    @media (max-width: 400px) {
      .phone-frame {
        transform: scale(0.9);
      }
    }

    @media (max-width: 350px) {
      .phone-frame {
        transform: scale(0.8);
      }
    }



    /* Trang trí nền */

    .bg-decoration {

      position: absolute;

      top: -50px;

      right: -50px;

      width: 200px;

      height: 200px;

      background: radial-gradient(circle, var(--light-blue) 0%, transparent 70%);

      border-radius: 50%;

      z-index: 0;

    }



    .bg-decoration-bottom {

      position: absolute;

      bottom: -100px;

      left: -100px;

      width: 300px;

      height: 300px;

      background: radial-gradient(circle, var(--light-blue) 0%, transparent 70%);

      border-radius: 50%;

      z-index: 0;

      opacity: 0.5;

    }



    .notch {

      width: 160px;

      height: 30px;

      background-color: #333;

      position: absolute;

      top: 0;

      left: 50%;

      transform: translateX(-50%);

      border-bottom-left-radius: 18px;

      border-bottom-right-radius: 18px;

      z-index: 10;

    }



    .primary-btn {

      background-color: var(--primary-blue);

      transition: all 0.3s ease;

    }



    .primary-btn:active {

      transform: scale(0.98);

      opacity: 0.9;

    }



    .role-tab {

      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    }



    .role-tab.active {

      background-color: var(--primary-blue);

      color: white;

      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);

    }



    /* Cải thiện hiển thị input */

    input {

      border-color: #D1D5DB !important;

    }



    input:focus {

      border-color: var(--primary-blue) !important;

      background-color: #ffffff !important;

      ring: 2px;

      ring-color: rgba(2, 132, 199, 0.2);

      outline: none;

    }



    .screen {

      display: none;

      z-index: 1;

    }



    .screen.active {

      display: flex;

      flex-direction: column;

      height: 100%;

    }



    .otp-input {

      width: 45px;

      height: 55px;

      text-align: center;

      font-size: 20px;

      font-weight: bold;

      border: 2px solid #D1D5DB;

      border-radius: 12px;

      background: #ffffff;

    }



    /* Hiệu ứng sóng mờ */

    .wave {

      position: absolute;

      bottom: 0;

      left: 0;

      width: 100%;

      height: 100px;

      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23E0F2FE" fill-opacity="0.4" d="M0,160L48,176C96,192,192,224,288,213.3C384,203,480,149,576,149.3C672,149,768,203,864,213.3C960,224,1056,192,1152,165.3C1248,139,1344,117,1392,106.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');

      background-size: cover;

      z-index: -1;

    }
  </style>

</head>



<body>



  <div class="phone-frame shadow-2xl">

    <div class="notch"></div>

    <div class="bg-decoration"></div>

    <div class="bg-decoration-bottom"></div>

    <div class="wave"></div>



    <!-- MÀN HÌNH ĐĂNG NHẬP -->

    <div id="loginView" class="screen active">

      <div class="pt-24 pb-6 flex flex-col items-center">

        <!-- Illustration Placeholder -->

        <div class="mb-4 text-blue-100">

          <svg width="70" height="70" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#0284C7" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />

            <path d="M2 17L12 22L22 17" stroke="#0284C7" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />

            <path d="M2 12L12 17L22 12" stroke="#0284C7" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />

          </svg>

        </div>

        <h1 class="text-4xl font-extrabold tracking-tight text-[#0284C7]">ECONTACT</h1>

        <div class="h-1.5 w-10 bg-[#0284C7] mt-2 rounded-full"></div>

        <p class="text-gray-500 text-sm font-semibold mt-3">Sổ liên lạc điện tử cấp THCS</p>

      </div>



      <div class="px-8 flex-1">

        <div class="bg-gray-100 p-1.5 rounded-2xl flex mb-6">

          <button id="parentTab" onclick="switchRole('parent')"
            class="role-tab active flex-1 py-3 rounded-xl text-sm font-bold">

            Phụ huynh

          </button>

          <button id="studentTab" onclick="switchRole('student')"
            class="role-tab flex-1 py-3 rounded-xl text-sm font-bold text-gray-400">

            Học sinh

          </button>

        </div>



        <div class="space-y-4">

          <div class="group">

            <label id="idLabel" class="block text-[10px] font-black text-gray-500 uppercase tracking-[2px] mb-2 ml-1">Số

              điện thoại</label>

            <input type="text" id="idInput"
              class="w-full px-5 py-4 bg-white border-2 border-gray-300 rounded-2xl text-gray-800 transition-all focus:ring-4 focus:ring-blue-50 shadow-sm">

          </div>



          <div>

            <label class="block text-[10px] font-black text-gray-500 uppercase tracking-[2px] mb-2 ml-1">Mật

              khẩu</label>

            <div class="relative">

              <input type="password" id="loginPassword" placeholder="••••••••"
                class="w-full px-5 py-4 bg-white border-2 border-gray-300 rounded-2xl text-gray-800 transition-all focus:ring-4 focus:ring-blue-50 shadow-sm">

            </div>

          </div>



          <div class="flex justify-end pr-1">

            <button onclick="showScreen('forgotPassView')" class="text-sm font-bold text-[#0284C7] hover:underline">Quên

              mật khẩu?</button>

          </div>

        </div>



        <!-- Nút đăng nhập tối ưu: py-5 thay vì py-6 để cân đối hơn, font-black tăng cường nhấn mạnh -->

        <button onclick="checkFirstLogin()"
          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-8 shadow-lg shadow-blue-200 flex items-center justify-center gap-2">

          ĐĂNG NHẬP

          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

            <path d="M5 12h14M12 5l7 7-7 7" />

          </svg>

        </button>

      </div>



      <!-- Footer tinh gọn -->

      <div class="pb-8 px-8 text-center">

        <p class="text-[10px] text-gray-400 font-bold uppercase tracking-[2px]">Phiên bản 1.0.2 • Project 2 - HUST 2026

        </p>

      </div>

    </div>



    <!-- MÀN HÌNH QUÊN MẬT KHẨU -->

    <div id="forgotPassView" class="screen">

      <div class="pt-20 px-8">

        <button onclick="showScreen('loginView')" class="mb-6 text-gray-400 flex items-center font-bold text-sm">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="3" class="mr-2">

            <path d="M15 18l-6-6 6-6" />

          </svg>

          Quay lại

        </button>

        <h2 class="text-3xl font-black text-gray-800">Khôi phục</h2>

        <p class="text-gray-500 text-sm mt-3 font-medium">Chọn phương thức để lấy lại quyền truy cập tài khoản.</p>



        <div class="mt-8 space-y-4">
          <!-- Phương thức 1: Nhận mã OTP -->
          <button onclick="showScreen('enterPhoneView')"
            class="w-full p-6 bg-white border-2 border-gray-200 rounded-3xl flex items-center hover:border-blue-300 transition-all text-left shadow-sm">

            <div class="w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-[#0284C7] mr-4">

              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <path
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">

                </path>

              </svg>

            </div>

            <div class="flex-1">

              <h4 class="font-black text-gray-800">Nhận mã OTP</h4>

              <p class="text-[11px] text-gray-400 font-bold uppercase tracking-tighter mt-1">Số điện thoại đăng ký</p>

            </div>

            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ddd"
              stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

              <polyline points="9 18 15 12 9 6"></polyline>

            </svg>

          </button>

          <!-- Phương thức 2: Liên hệ phụ huynh (chỉ hiển thị cho học sinh) -->
          <button id="contactParentBtn" onclick="showScreen('contactParentView')" style="display: none;"
            class="w-full p-6 bg-white border-2 border-gray-200 rounded-3xl flex items-center hover:border-blue-300 transition-all text-left shadow-sm">

            <div class="w-14 h-14 bg-purple-50 rounded-2xl flex items-center justify-center text-purple-600 mr-4">

              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>

                <circle cx="9" cy="7" r="4"></circle>

                <line x1="20" y1="8" x2="20" y2="14"></line>

                <line x1="23" y1="11" x2="17" y2="11"></line>

              </svg>

            </div>

            <div class="flex-1">

              <h4 class="font-black text-gray-800">Liên hệ phụ huynh</h4>

              <p class="text-[11px] text-gray-400 font-bold uppercase tracking-tighter mt-1">Gửi yêu cầu đến phụ huynh

              </p>

            </div>

            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ddd"
              stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

              <polyline points="9 18 15 12 9 6"></polyline>

            </svg>

          </button>

          <!-- Phương thức 3: Hỗ trợ nhà trường -->
          <button onclick="showScreen('contactSchoolView')"
            class="w-full p-6 bg-white border-2 border-gray-200 rounded-3xl flex items-center hover:border-blue-300 transition-all text-left shadow-sm">

            <div class="w-14 h-14 bg-gray-50 rounded-2xl flex items-center justify-center text-gray-600 mr-4">

              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>

                <circle cx="9" cy="7" r="4"></circle>

                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>

                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>

              </svg>

            </div>

            <div class="flex-1">

              <h4 class="font-black text-gray-800">Hỗ trợ nhà trường</h4>

              <p class="text-[11px] text-gray-400 font-bold uppercase tracking-tighter mt-1">Cấp lại mật khẩu trực tiếp

              </p>

            </div>

            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ddd"
              stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

              <polyline points="9 18 15 12 9 6"></polyline>

            </svg>

          </button>

        </div>

      </div>

    </div>



    <!-- MÀN HÌNH LIÊN HỆ NHÀ TRƯỜNG -->

    <div id="contactSchoolView" class="screen">

      <div class="pt-20 px-8">

        <button onclick="showScreen('forgotPassView')" class="mb-6 text-gray-400 flex items-center font-bold text-sm">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="3" class="mr-2">

            <path d="M15 18l-6-6 6-6" />

          </svg>

          Quay lại

        </button>

        <h2 class="text-3xl font-black text-gray-800">Liên hệ</h2>

        <p class="text-gray-500 text-sm mt-3 font-medium">Liên hệ Văn phòng nhà trường để được hỗ trợ.</p>



        <div class="mt-8 bg-gray-50 rounded-[32px] p-7 space-y-7 border-2 border-gray-200">

          <div class="flex items-start">

            <div class="text-[#0284C7] mr-4 mt-1 bg-white p-2 rounded-lg shadow-sm border border-gray-200">

              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>

                <circle cx="12" cy="10" r="3"></circle>

              </svg>

            </div>

            <div>

              <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Địa chỉ</p>

              <p class="text-[13px] font-bold text-gray-700 leading-snug">Phòng Giáo vụ - Tầng 1, Tòa nhà A1</p>

            </div>

          </div>



          <div class="flex items-start">

            <div class="text-[#0284C7] mr-4 mt-1 bg-white p-2 rounded-lg shadow-sm border border-gray-200">

              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <path
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">

                </path>

              </svg>

            </div>

            <div>

              <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Hotline</p>

              <p class="text-[13px] font-bold text-gray-700">024 1234 5678</p>

            </div>

          </div>



          <div class="flex items-start">

            <div class="text-[#0284C7] mr-4 mt-1 bg-white p-2 rounded-lg shadow-sm border border-gray-200">

              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                <circle cx="12" cy="12" r="10"></circle>

                <polyline points="12 6 12 12 16 14"></polyline>

              </svg>

            </div>

            <div>

              <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Giờ làm việc</p>

              <p class="text-[13px] font-bold text-gray-700">08:00 - 17:00 (Thứ 2 - 6)</p>

            </div>

          </div>

        </div>

        <!-- Nút gửi yêu cầu -->
        <button onclick="sendNotificationToSchool()"
          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-6 shadow-xl shadow-blue-100 flex items-center justify-center gap-2">
          <span>GỬI YÊU CẦU</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
          </svg>
        </button>

      </div>

    </div>



    <!-- MÀN HÌNH LIÊN HỆ PHỤ HUYNH -->

    <div id="contactParentView" class="screen">

      <div class="pt-20 px-8">

        <button onclick="showScreen('forgotPassView')" class="mb-6 text-gray-400 flex items-center font-bold text-sm">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="3" class="mr-2">

            <path d="M15 18l-6-6 6-6" />

          </svg>

          Quay lại

        </button>

        <h2 class="text-3xl font-black text-gray-800">Liên hệ phụ huynh</h2>

        <p class="text-gray-500 text-sm mt-3 font-medium">Gửi yêu cầu đặt lại mật khẩu đến tài khoản phụ huynh.</p>



        <div class="mt-8 space-y-5">

          <!-- Thông tin học sinh -->

          <div class="bg-purple-50 rounded-2xl p-4 border-2 border-purple-100">

            <div class="flex items-center gap-3">

              <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center text-white font-black text-lg">

                HB

              </div>

              <div>

                <p class="text-[10px] font-black text-purple-400 uppercase tracking-widest">Học sinh</p>

                <p class="text-sm font-bold text-gray-800">Nguyễn Hoàng B • Lớp 9A1</p>

              </div>

            </div>

          </div>



          <!-- Danh sách phụ huynh -->

          <div>

            <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 ml-1">Chọn phụ huynh</label>

            <div class="space-y-3">

              <!-- Phụ huynh 1 (Đang được liên kết) -->

              <div class="bg-white border-2 border-purple-200 rounded-2xl p-4 flex items-center justify-between">

                <div class="flex items-center gap-3">

                  <div class="w-11 h-11 bg-purple-100 rounded-xl flex items-center justify-center text-purple-600">

                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>

                      <circle cx="12" cy="7" r="4"></circle>

                    </svg>

                  </div>

                  <div>

                    <p class="text-sm font-bold text-gray-800">PH. Nguyễn Văn A</p>

                    <p class="text-[10px] text-gray-400 font-semibold">0901 xxx xxx</p>

                  </div>

                </div>

                <input type="radio" name="parent" checked class="w-5 h-5 text-purple-600">

              </div>

            </div>

          </div>

        </div>



        <!-- Nút gửi yêu cầu -->

        <button onclick="sendRequestToParent()"

          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-6 shadow-xl shadow-purple-100 flex items-center justify-center gap-2">

          <span>GỬI YÊU CẦU</span>

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"

            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />

          </svg>

        </button>

      </div>

    </div>



    <!-- MÀN HÌNH NHẬP SỐ ĐIỆN THOẠI -->

    <div id="enterPhoneView" class="screen">

      <div class="pt-20 px-8">

        <button onclick="showScreen('forgotPassView')" class="mb-6 text-gray-400 flex items-center font-bold text-sm">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="3" class="mr-2">

            <path d="M15 18l-6-6 6-6" />

          </svg>

          Quay lại

        </button>

        <h2 class="text-3xl font-black text-gray-800">Nhận mã OTP</h2>

        <p class="text-gray-500 text-sm mt-3 font-medium">Nhập số điện thoại đã đăng ký để nhận mã xác thực.</p>



        <div class="mt-8 space-y-5">

          <div>

            <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1">Số điện thoại</label>

            <input type="tel" id="phoneNumberInput"

              class="w-full px-5 py-4 bg-white border-2 border-gray-300 rounded-2xl text-gray-800 shadow-sm focus:ring-4 focus:ring-blue-50 transition-all focus:border-[#0284C7] focus:outline-none"

              oninput="formatPhoneNumber(this)">

          </div>

        </div>



        <button onclick="sendOTP()"

          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-8 shadow-xl shadow-blue-100 flex items-center justify-center gap-2">

          <span>GỬI MÃ OTP</span>

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"

            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">

            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />

          </svg>

        </button>

      </div>

    </div>



    <!-- MÀN HÌNH NHẬP OTP -->

    <div id="otpView" class="screen">

      <div class="pt-20 px-8">

        <button onclick="showScreen('enterPhoneView')" class="mb-6 text-gray-400 flex items-center font-bold text-sm">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="3" class="mr-2">

            <path d="M15 18l-6-6 6-6" />

          </svg>

          Quay lại

        </button>

        <h2 class="text-3xl font-black text-gray-800">Xác thực</h2>

        <p class="text-gray-500 text-sm mt-3 font-medium">Mã đã được gửi tới <span id="maskedPhone" class="text-[#0284C7] font-black">0901 xxxx</span></p>



        <div class="flex justify-between mt-12">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm" value="1">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm" value="2">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm" value="3">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm">

          <input type="text" maxlength="1" class="otp-input border-2 focus:border-[#0284C7] shadow-sm">

        </div>



        <div class="text-center mt-10">

          <p class="text-sm text-gray-400 font-medium">Chưa nhận được mã? <span
              class="text-[#0284C7] font-black cursor-pointer">Gửi lại (59s)</span></p>

        </div>



        <button onclick="checkFirstLogin()"
          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-10 shadow-xl shadow-blue-100">

          XÁC THỰC

        </button>

      </div>

    </div>



    <!-- MÀN HÌNH ĐỔI MẬT KHẨU LẦN ĐẦU -->

    <div id="changePassView" class="screen">

      <div class="pt-20 px-8 flex-1 flex flex-col">

        <h2 class="text-3xl font-black text-gray-800">Đổi mật khẩu</h2>
        <p class="text-gray-500 text-sm mt-2 font-medium">Đăng nhập lần đầu tiên. Vui lòng đổi mật khẩu để bảo vệ tài
          khoản của bạn.</p>

        <div class="space-y-5 mt-8">
          <!-- New Password Input -->
          <div>
            <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1">Mật khẩu
              mới</label>
            <div class="relative">
              <input type="password" id="newPassword" placeholder="Nhập mật khẩu mới" oninput="checkPasswordStrength()"
                class="w-full px-5 py-4 bg-white border-2 border-gray-300 rounded-2xl text-gray-800 shadow-sm focus:ring-4 focus:ring-blue-50 transition-all focus:border-[#0284C7] focus:outline-none">
              <button onclick="togglePassword('newPassword')"
                class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>

          <!-- Confirm Password Input -->
          <div>
            <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1">Xác nhận mật
              khẩu mới</label>
            <div class="relative">
              <input type="password" id="confirmPassword" placeholder="Nhập lại mật khẩu mới"
                oninput="checkPasswordMatch()"
                class="w-full px-5 py-4 bg-white border-2 border-gray-300 rounded-2xl text-gray-800 shadow-sm focus:ring-4 focus:ring-blue-50 transition-all focus:border-[#0284C7] focus:outline-none">
              <button onclick="togglePassword('confirmPassword')"
                class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hoYSBox=" 0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>

        </div>

        <!-- Password Strength Indicator -->
        <div class="mt-6">
          <div class="flex items-center gap-2">
            <p class="text-[11px] text-gray-400 font-bold uppercase tracking-tighter">Độ mạnh:</p>
            <div class="flex gap-1">
              <div id="strengthBar1" class="w-8 h-1.5 rounded-full bg-red-400 transition-all"></div>
              <div id="strengthBar2" class="w-8 h-1.5 rounded-full bg-gray-200 transition-all"></div>
              <div id="strengthBar3" class="w-8 h-1.5 rounded-full bg-gray-200 transition-all"></div>
              <div id="strengthBar4" class="w-8 h-1.5 rounded-full bg-gray-200 transition-all"></div>
            </div>
          </div>
        </div>

        <!-- Password Requirements -->
        <div class="mt-6 flex items-start gap-2 px-1">
          <div class="w-1.5 h-1.5 rounded-full bg-blue-400 mt-1.5"></div>
          <p class="text-[11px] text-gray-400 font-bold uppercase tracking-tighter leading-relaxed">Mật khẩu có ít nhất
            8 ký tự</p>
        </div>

        <button onclick="validateAndChangePassword()"
          class="primary-btn w-full py-5 rounded-2xl text-white font-black text-lg mt-6 shadow-xl shadow-blue-100 flex items-center justify-center gap-2">
          <span>ĐỔI MẬT KHẨU</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>



    <!-- Feedback Overlay -->

    <div id="feedback"
      class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-8 py-3.5 rounded-full text-sm font-bold opacity-0 transition-opacity pointer-events-none z-50 shadow-2xl">

      Thao tác thành công!

    </div>

  </div>



  <script>
    let currentRole = 'parent';
    let tempNewPassword = '';



    function showScreen(screenId) {

      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));

      document.getElementById(screenId).classList.add('active');

      // Hiển thị nút "Liên hệ phụ huynh" chỉ khi là học sinh vào màn hình quên mật khẩu
      if (screenId === 'forgotPassView') {
        const contactParentBtn = document.getElementById('contactParentBtn');
        if (contactParentBtn) {
          contactParentBtn.style.display = currentRole === 'student' ? 'flex' : 'none';
        }
      }

    }



    function switchRole(role) {

      currentRole = role;

      const parentTab = document.getElementById('parentTab');

      const studentTab = document.getElementById('studentTab');

      const idLabel = document.getElementById('idLabel');

      const idInput = document.getElementById('idInput');



      if (role === 'parent') {

        parentTab.classList.add('active');

        parentTab.classList.remove('text-gray-400');

        studentTab.classList.remove('active');

        studentTab.classList.add('text-gray-400');

        idLabel.innerText = 'Số điện thoại';



      } else {

        studentTab.classList.add('active');

        studentTab.classList.remove('text-gray-400');

        parentTab.classList.remove('active');

        parentTab.classList.add('text-gray-400');

        idLabel.innerText = 'Mã học sinh';



      }

    }

    function checkFirstLogin() {

      if (currentRole === 'student') {

        showScreen('changePassView');

      } else {

        handleSuccess("Đăng nhập thành công!");

      }

    }

    function handleSuccess(msg = "Lưu thành công!") {

      const feedback = document.getElementById('feedback');

      feedback.innerText = msg;

      feedback.style.opacity = '1';

      setTimeout(() => {

        feedback.style.opacity = '0';

        if (msg.includes("thành công")) showScreen('loginView');

      }, 2000);

    }
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const button = input.nextElementSibling;

      if (input.type === 'password') {
        input.type = 'text';
        button.classList.add('text-[#0284C7]');
      } else {
        input.type = 'password';
        button.classList.remove('text-[#0284C7]');
      }
    }

    function checkPasswordStrength() {
      const password = document.getElementById('newPassword').value;
      const bars = ['strengthBar1', 'strengthBar2', 'strengthBar3', 'strengthBar4'];

      let strength = 0;
      // Tính độ mạnh dựa trên độ dài
      if (password.length >= 8) strength = 1;
      if (password.length >= 10) strength = 2;
      if (password.length >= 12) strength = 3;
      if (password.length >= 14) strength = 4;

      const colors = ['bg-red-400', 'bg-yellow-400', 'bg-blue-400', 'bg-green-400'];

      bars.forEach((barId, index) => {
        const bar = document.getElementById(barId);
        bar.className = 'w-8 h-1.5 rounded-full transition-all';
        if (index < strength) {
          bar.classList.add(colors[strength - 1]);
        } else {
          bar.classList.add('bg-gray-200');
        }
      });
    }

    function checkPasswordMatch() {
      const newPass = document.getElementById('newPassword').value;
      const confirmPass = document.getElementById('confirmPassword');

      if (confirmPass.value && newPass !== confirmPass.value) {
        confirmPass.style.borderColor = '#ef4444';
      } else if (confirmPass.value) {
        confirmPass.style.borderColor = '#22c55e';
      } else {
        confirmPass.style.borderColor = '#D1D5DB';
      }
    }

    function validateAndChangePassword() {

      const newPass = document.getElementById('newPassword').value;
      const confirmPass = document.getElementById('confirmPassword').value;

      if (newPass.length < 8) {
        showError('Mật khẩu mới phải có ít nhất 8 ký tự');
        return;
      }

      if (newPass !== confirmPass) {
        showError('Mật khẩu xác nhận không khớp');
        return;
      }

      // Store the new password temporarily for re-authentication
      tempNewPassword = newPass;

      // Clear all password fields
      document.getElementById('newPassword').value = '';
      document.getElementById('confirmPassword').value = '';

      // Show success and navigate back to login
      handleSuccess('Đổi mật khẩu thành công!');
    }

    function sendNotificationToSchool() {
      // Giả lập gửi thông báo đến nhà trường
      handleSuccess('Đã gửi thông báo đến nhà trường!');
    }

    function sendRequestToParent() {
      // Giả lập gửi yêu cầu đến phụ huynh
      handleSuccess('Đã gửi yêu cầu đến phụ huynh!');
    }

    function formatPhoneNumber(input) {
      // Lấy giá trị hiện tại và xóa tất cả ký tự không phải số
      let rawValue = input.value.replace(/\D/g, '');

      // Giới hạn tối đa 10 chữ số
      if (rawValue.length > 10) {
        rawValue = rawValue.slice(0, 10);
      }

      // Nếu đã đủ 10 số, không cho nhập thêm (return sớm)
      if (rawValue.length === 10) {
        // Format: 0901 xxx xxx (4 số đầu + space + 3 số + space + 3 số)
        let formatted = rawValue.slice(0, 4) + ' ' + rawValue.slice(4, 7) + ' ' + rawValue.slice(7);
        input.value = formatted;
        return;
      }

      // Format khi chưa đủ 10 số
      let value = rawValue;
      if (value.length >= 4) {
        value = value.slice(0, 4) + ' ' + value.slice(4);
      }
      if (value.length >= 8) {
        value = value.slice(0, 8) + ' ' + value.slice(8);
      }

      input.value = value;
    }

    function sendOTP() {
      const phoneNumber = document.getElementById('phoneNumberInput').value.replace(/\s/g, '');

      if (phoneNumber.length < 10) {
        showError('Vui lòng nhập số điện thoại hợp nhất');
        return;
      }

      // Mask số điện thoại: 4 số đầu + xxxx + 2 số cuối
      const masked = phoneNumber.slice(0, 4) + ' xxxx ' + phoneNumber.slice(-2);
      document.getElementById('maskedPhone').innerText = masked;

      // Chuyển sang màn hình nhập OTP
      showScreen('otpView');
    }

    function showError(message) {
      const feedback = document.getElementById('feedback');
      feedback.style.backgroundColor = '#ef4444';
      feedback.innerText = message;
      feedback.style.opacity = '1';

      setTimeout(() => {
        feedback.style.opacity = '0';
        setTimeout(() => {
          feedback.style.backgroundColor = '#1f2937';
        }, 300);
      }, 2500);
    }
  </script>

</body>



</html>